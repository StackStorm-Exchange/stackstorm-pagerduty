description: ...
enabled: true
entry_point: ...
name: ...
parameters:
  name:
    type: string
    description: ... # Don't include this if it's obvious, like the name key
    required: true  # default, so this isn't strictly necessary
    immutable: false  # default, also not strictly necessary
    default: ...  # not strictly necessary, do something smart here
    # need to pass a password, token, or API key to an action? use this to keep
    # it out of logs and have it render as an input="password" field in the web
    # UI
    secret: ...
  type:
    ...
  time_zone:
    type: string
    required: true
    enum:
      # Use this ONLY if you are willing to update this list every time ANY
      # country/state/province/county/city decides to adjust how they handle
      # timezones
      - America/New_York
      - ...
  description:
    ...
  schedule_layers:
    type: array
    items:
      type: object
      properties:
        name:
          type: string
          ...
        start:
          type: string
          description: ISO8601 compliant timestamp
          ...
        end:
          type: string
          description: ISO8601 compliant timestamp
          ...
        rotation_virtual_start:
          type: string
          description: ISO8601 compliant timestamp
          ...
        rotation_turn_length_seconds:
          type: integer
          # This is a good option to not require and have a good default value
          required: false
          default: 86400
        users:
          type: array
          items:
            type: object
            properties:
              user:
                type: object
                properties:
                  id:
                    type: string
                    # It is a VERY good idea to put a description on every
                    # possible ID field in a schema definition, because
                    # everything has its own ID scheme, and it's vital to tell
                    # users *what type of ID* they should put here and where it
                    # should come from.
                    # - Is it a StackStorm ID?
                    # - Is it their employee ID?
                    # - Is it their Active Directory ID?
                    # - Is it their PagerDuty ID?
                    description: PagerDuty user ID, should start with PX
                  type:
                    type: string
                    # Same story here
                    description: The type of PagerDuty user
                    # Consider making this an enum so it renders as a dropdown
                    # in the web UI and gives users an idea of what are valid
                    # values
                    enum:
                      - user
                      - admin  # double check this
                      - developer  # double check this too
        restrictions:
          type: array
          items:
            type: object
            properties:
              type:
                type: string
                # Judging from the PD docs, this also looks like it should be an
                # enum
                enum:
                  - daily_restriction
              start_time_of_day:
                type: string
                # Put this in quotes so YAML doesn't think the colon characters
                # indicate a dictionary
                description: "Time of day the restriction starts. Format: HH:MM:SS"
              duration_seconds:
                type: integer
                required: false
                default: 32400  # This may not be a good default value